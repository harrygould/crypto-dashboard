<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Crypto Dashboard</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f4f4f9;
        text-align: center;
        padding: 20px;
      }
      #search-bar {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Crypto Dashboard</h1>
    <input
      type="text"
      id="search-bar"
      placeholder="Enter cryptocurrency (e.g., BTC, ETH)"
    />
    <div id="tradingview-widget"></div>

    <script>
      const topCryptos = [
        "BTC",
        "ETH",
        "BNB",
        "XRP",
        "ADA",
        "SOL",
        "DOGE",
        "DOT",
        "MATIC",
        "LTC",
      ];

      document
        .getElementById("search-bar")
        .addEventListener("input", function () {
          const query = this.value.toUpperCase();
          if (topCryptos.includes(query)) {
            loadTradingViewWidget(query);
          }
        });

      function loadTradingViewWidget(symbol) {
        const widgetContainer = document.getElementById("tradingview-widget");
        widgetContainer.innerHTML = ""; // Clear previous widget
        const script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "https://s3.tradingview.com/tv.js";
        script.onload = function () {
          new TradingView.widget({
            width: 800,
            height: 500,
            symbol: `BINANCE:${symbol}USDT`,
            interval: "D",
            theme: "light",
            style: "1",
            locale: "en",
            toolbar_bg: "#f1f3f6",
            enable_publishing: false,
            allow_symbol_change: true,
            container_id: "tradingview-widget",
          });
        };
        widgetContainer.appendChild(script);
      }
    </script>
  </body>
</html>
